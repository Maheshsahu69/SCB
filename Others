import { useEffect, useState } from "react";
import { useSelector } from "react-redux";
import { CONSTANTS } from "../../../utils/common/constants";
import { KeyWithAnyModel, StoreModel } from "../../../utils/model/common-model";
import "./footer.scss";
import { getUrl } from "../../../utils/common/change.utils";

const Footer = (props: KeyWithAnyModel) => {
  const stageSelector = useSelector((state: StoreModel) => state.stages.stages);
  const [backBtn, setBackBtn] = useState(false);
  const language = getUrl.getLanguageInfo("lang");
  
  useEffect(() => {
    if (stageSelector && stageSelector.length > 0) {
      const isEnableBackBtn = stageSelector[0].stageId !== CONSTANTS.STAGE_NAMES.PD_1 &&
        stageSelector[0].stageId !== CONSTANTS.STAGE_NAMES.BD_1A && stageSelector[0].stageId !== CONSTANTS.STAGE_NAMES.LD_1
          ? true
          : false;
      setBackBtn(isEnableBackBtn);
    }
  }, [stageSelector]);

  return (
    <>
      <div className="footer">
        {backBtn && (
          <div className="back" onClick={props.backHandler}>
            <span className="arrow"></span> {language === CONSTANTS.LANG_EN ? 'Back' : language === CONSTANTS.LANG_CN ? '返回' : '返回'}
          </div>
        )}
        
        <button type="submit" disabled={props.validateNxt !== "form-valid" ? true : false} className={`continue ${props.validateNxt}`}>
          {stageSelector?.[0]?.stageId === 'rp' ?
              language === CONSTANTS.LANG_EN ?
                'Agree & Submit' 
              : 
                language === CONSTANTS.LANG_CN ? 
                  '提交' 
                : 
                  '提交' 
            : 
              stageSelector?.[0]?.stageId === 'ld-1' ?
                language === CONSTANTS?.LANG_EN ? 'Confirm' : language === CONSTANTS?.LANG_CN ? '確認' : '确认'
              :
                language === CONSTANTS?.LANG_EN ? 'Continue' : language === CONSTANTS?.LANG_CN ? '继续' : '繼續'
          }
        </button>
      </div>
    </>
  );
};



export default Footer;
